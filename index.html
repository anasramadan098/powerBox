<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="space">
        <div class="logo" style="display: flex; align-items:center; gap:20px">
            <i class="fa-solid fa-bars"></i>
            <img src="imgs/logo.jpg" class="logo" />
        </div>
        <input type="search" placeholder="ادخل كلمة البحث" class="search-input">
        <div class="cart">
            <div class="icon">
                <i class="fa-solid fa-cart-shopping"></i>
            <!-- </div>
                    <h5>سلة المشتريات</h5>
                <p><span class="count">1</span>منتج - <span class="price">2500</span>ريال</p>
            </div> -->
        </div>
    </header>
    <!-- End Header -->
    <section class="cart space">
        <p class="page-info">
            <span>
                <i class="fa-solid fa-house"></i>
                الرئيسية
            </span>
            >
            <span>السلة</span>
        </p>
        <div class="info-icons">
            <div class="item" data="الأولي">
                <i class="fa-solid fa-cart-plus"></i>
                <p>سلة المشتريات</p>
            </div>
            <div class="item" data="الثانية">
                <i class="fa-solid fa-money-check-dollar"></i>
                <p>اتمام العملية</p>
            </div>
        </div>
        <!-- Start Product -->
        <div class="product">
            <div class="remove">X</div>
            <img src="https://www.powersbox-ksa.com/Images/Original/b0ff60f0-86b6-4f51-98ca-93a541484f05.jpeg" alt="">
            <h3 class="title">بلاي ستيشن 5، قارىء اقراص، حزمة</h3>
            <span class="price"><span>2500.00</span>ر.س</span>
            <p class="note">يدعم التقسيط (دفعة اولى تبدأ من 1000)</p>
            <p class="f-price">
                الإجمالي <span>2500.00</span> ر.س
            </p>
            <label for="number">الكمية</label>
            <input type="number" min="1" value="1">
        </div>
        <div class="last-price">
            <div>
                <i class="fa-solid fa-calculator"></i>
                <span>مجموع السلة</span>
            </div>
            <p><span class="f-price">2500</span>ر.س</p>
        </div>
        <div class="pay">
            <p class="mb-30">التوصيل بواسطة:</p>
            <div class="radios">
                <div >
                    <input type="radio"  checked name="a" id="ارامكس">
                    <label for="ارامكس">ارامكس</label>
                </div>
                <span>50 ر.س</span>
            </div>
            <div class="radios">
                <div >
                    <input type="radio" name="a" id="سمسا">
                    <label for="سمسا">سمسا</label>
                </div>
                <span>24 ر.س</span>
            </div>
            <p class="note" class="mb-30" style="color:#f9c904">
                في حالة اردت الشراء بالاقساط والاصناف المختارة تدعم الاقساط يرجى تحديد على كم قسط تريد التقسيط قبل تغيير الدفعة الاولى
            </p>
            <div class="options">
                <label for="InstallmentBy">الدفع/التقسيط على</label>
            <select  id="InstallmentBy">
                <option value="0">نقدا</option>
                <option value="1">شهر</option>
                <option value="2">شهرين</option>
                <option value="3">3 اشهر</option>
                <option value="4">4 اشهر</option>
                <option value="5">5 اشهر</option>
                <option value="6">6 اشهر</option>
                <option value="7">7 اشهر</option>
                <option value="8">8 اشهر</option>
                <option value="9">9 اشهر</option>
                <option value="10">10 اشهر</option>
                <option value="11">11 شهر</option>
                <option value="12">12 شهر</option>
                <option value="13">13 شهر</option>
                <option value="14">14 شهر</option>
                <option value="15">15 شهر</option>
                <option value="16">16 شهر</option>
                <option value="17">17 شهر</option>
                <option value="18">18 شهر</option>
                <option value="19">19 شهر</option>
                <option value="20">20 شهر</option>
                <option value="21">21 شهر</option>
                <option value="22">22 شهر</option>
                <option value="23">23 شهر</option>
                <option value="24">24 شهر</option>
            </select>
            </div>
            <div class="options">
                <label for="priceInput">الدفعة الأولي</label>
                <input type="text" value="2500" id="priceInput">
            </div>
        </div>
        <div class="payBtnDiv">
            <a href="#" class="payBtn">اطلب الأن ></a>
        </div>
    </section>

    <script>
        const input = document.querySelector('input[type="number"]');
        const price = document.querySelector('.product > span.price span').textContent;
        let monthlyPrice = 0;

        let finalPrice = price
        input.addEventListener('input',function() {
            finalPrice = price * input.value
            document.querySelector('.f-price span').textContent =  finalPrice;
            document.querySelector('p span.f-price').textContent = finalPrice;
            document.querySelector('#priceInput').value = finalPrice;
        })

        document.querySelector('#InstallmentBy').addEventListener('input',function() {
            isCash()
        })

        isCash()

        function isCash() {
            if (document.querySelector('#InstallmentBy').value == 0) {
                document.querySelector('#priceInput').readOnly = true;
                document.querySelector('#priceInput').addEventListener('input',()=> {
                    if (document.querySelector('.pay input.rest') != null) {
                        let  p = finalPrice - document.querySelector('#priceInput').value;
                        let a = p / document.querySelector('#InstallmentBy').value;
                        document.querySelector('.pay input.rest').value = Math.round(a)
                        monthlyPrice = document.querySelector('.pay input.rest').value
                    }
                })
                if (document.querySelector('.pay input.rest') != null) {
                    document.querySelector('.pay input.rest').parentElement.remove()
                }
            } else {
                document.querySelector('#priceInput').readOnly = false;

                if (document.querySelector('.pay input.rest') == null) {
                    const div = document.createElement('div');
                    div.className = 'options';

                    const label = document.createElement('label');
                    label.for = 'rest';
                    label.innerHTML = 'الدفعة الشهرية';
                    div.appendChild(label);

                    const input = document.createElement('input');
                    input.type='text';
                    input.readOnly = true;
                    input.className = 'rest';
                    input.style.background = '#333';
                    let  p = finalPrice - document.querySelector('#priceInput').value;
                    let a = p / document.querySelector('#InstallmentBy').value;
                    input.value = Math.round(a)
                    div.appendChild(input);


                    document.querySelector('.pay').appendChild(div);
                }

            }
        }
        
    </script>
    <script src="main.js"></script>
</body>
</html>